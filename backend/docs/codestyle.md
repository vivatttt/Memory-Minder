# Кодстайл

Эта документация описывает основные правила кодстайла и нейминга, которых следует придерживаться при разработке на Python. Соблюдение этих принципов обеспечивает читаемость и поддержку кода.

## Общие Правила Нейминга

### Название переменной

- Название переменной должно отражать ее содержимое, но не тип данных и не дополнительную информацию.
  - Хорошо: `files = []`, плохо: `file_list = []`, `file_array = []`
  - Хорошо: `user = {}`, плохо: `user_data = {}`

### Предлоги и суффиксы

- Приветствуется использование предлогов и суффиксов для разрешения неоднозначности.
  - Плохо: `delivered_date` (указывает тип данных)
  - Плохо: `delivered` (не ясно назначение)
  - Хорошо: `delivered_at` (решает обе проблемы)

### Булевые переменные

- Булевые переменные должны начинаться с `is_`, `has_`, `can_` и т.д., чтобы сразу указывать на их тип.
  - Хорошо: `is_active, плохо: `active_flag`
  - Хорошо: `has_errors`, плохо: `error_check`
  
- В названиях булевых переменных не должно быть отрицаний.
  - Хорошо: `is_blocked = True`, плохо: `is_unblocked = False`

### Временные метки и даты

- Используйте суффиксы `_at`, `_on` и подобные для обозначения временных меток и даты:
  - Хорошо: `created_at` указывает на временную метку

### Очевидная информация

- Название не должно содержать очевидную информацию.
  - Хорошо: `icon`, плохо: `displayed_icon` (и так понятно, что ее надо отображать)
  - В модели `User`: `id`, плохо: `user_id` (и так понятно, что это идентификатор)
  - Хорошо: `type_`, плохо: `type_name` (другой информации по типу нет)

### Сокращения

- Не стоит использовать сокращения, кроме общепринятых.
  - Хорошо: `connection`, плохо: `conn`
  - Хорошо: `user`, плохо: `usr`

### Идентификаторы

- Если переменная содержит `id`, то в названии поля должен быть `id`. А если вложенный объект, то id не должно быть.
  - Хорошо: `{"user_id": 123}`, плохо: `{"user": 123}`
  - Хорошо: `{"user_ids": [123, 124]}`, плохо: `{"users": [123, 124]}` и `{"users_id": [123, 124]}`

### Консистентность

- Переменные, содержащие одни и те же данные, должны называться во всех местах одинаково.
  - Везде `organization`, а не `institution` или `company`

### Названия классов

- Класс всегда называется в единственном числе.
  - Хорошо: `class User(BaseModel)`, плохо: `class Userss(BaseModel)`
  - Саму же таблицу стоит назвать `users`

### Простота

- Используйте осторожно: лучше просто и понятно, чем строго по правилам.

## Кодстайл

### Пустая строка

- Пустая строка для визуального отделения блоков кода. Это одно из правил PEP8, которое часто игнорируется. Код стоит делить на связанные блоки и добавлять между ними пустую строку.

### Вызов цепочек методов

Пример улучшения читаемости:
```python
return (
    await session.scalars(
        select(Organization)
        .join(User, on=(User.organization_id == m.Organization.id))
        .where(m.User.active == True)  # noqa
        .order_by(m.User.type, m.Organization.type)
    )
).all()
```
# С учетом отношений
```python
return (
    await session.scalars(
        select(Organization)
        .join(Organization.user)
        .where(User.active.is_(True))
        .order_by(User.type, Organization.type)
    )
).all()
```
### Объявление словарей

- Используйте `{'key': value}` вместо `dict(key=value)` при объявлении словарей.

### Объявление функции с большим числом аргументов

Если аргументы не помещаются в одну строку, объявление следует делать так:
```python
def long_function_name(  # enter here
    argument_one: bool,  # 4 spaces from parent indentation
    argument_two: int,   # every argument on next line
    argument_three: str,
    argument_four: Optional[int] = None,
    argument_five: Optional[str] = None,  # note trailing comma
) -> None:
    print(argument_one)
    do_other_stuff()
```
